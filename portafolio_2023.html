<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portafolio 2023 - Diagrama de Burbujas</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding: 20px;
            background-color: #f8f9fa;
            margin: 0;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 20px;
        }
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #7f8c8d;
            margin-bottom: 20px;
        }
        .back-button {
            display: inline-block;
            padding: 10px 20px;
            background: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            margin-bottom: 20px;
            transition: background 0.3s;
            font-size: 14px;
        }
        .back-button:hover {
            background: #2980b9;
        }
        .chart-container {
            position: relative;
            height: 600px;
            margin: 20px 0;
        }
        .legend {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 12px;
        }
        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        .info-panel {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #2196F3;
        }
        .pe-scale {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            padding: 10px;
            background: #f0f0f0;
            border-radius: 5px;
            font-size: 12px;
        }
        .summary {
            background: #f0f7ff;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid #4CAF50;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <a href="index.html" class="back-button">‚Üê Volver al Inicio</a>
            <h1>üìä Portafolio 2023 (Antes)</h1>
            <div class="subtitle">An√°lisis de Priorizaci√≥n - NPV vs PE vs Recursos</div>
        </div>
        
        <div class="info-panel">
            <strong>Configuraci√≥n del diagrama:</strong><br>
            ‚Ä¢ <strong>Eje X</strong>: NPV (Retorno en k‚Ç¨)<br>
            ‚Ä¢ <strong>Eje Y</strong>: PE (Probabilidad de √âxito en %)<br>
            ‚Ä¢ <strong>Tama√±o de burbuja</strong>: Recursos (k‚Ç¨)<br>
            ‚Ä¢ <strong>Color</strong>: Semestre de prioridad
        </div>

        <div class="pe-scale">
            <span>üî¥ Bajo (10%)</span>
            <span>üü° Medio (50%)</span>
            <span>üü¢ Alto (90%)</span>
        </div>
        
        <div class="chart-container">
            <canvas id="portfolioBubbleChart2023"></canvas>
        </div>

        <div class="legend" id="chartLegend2023"></div>

        <div class="summary">
            <strong>üìà Resumen del Portafolio 2023:</strong><br>
            ‚Ä¢ <strong>Total Inversi√≥n:</strong> 1,375k‚Ç¨<br>
            ‚Ä¢ <strong>Total NPV Esperado:</strong> 2,250k‚Ç¨<br>
            ‚Ä¢ <strong>Iniciativas S1-2023:</strong> 2 proyectos<br>
            ‚Ä¢ <strong>Iniciativas S2-2023:</strong> 1 proyecto<br>
            ‚Ä¢ <strong>Iniciativas S1-2024:</strong> 2 proyectos<br>
            ‚Ä¢ <strong>Iniciativas S2-2024:</strong> 1 proyecto<br>
            ‚Ä¢ <strong>Proyectos con Alta PE (90%):</strong> 2 proyectos<br>
            ‚Ä¢ <strong>Proyectos con Media PE (50%):</strong> 4 proyectos
        </div>
    </div>

    <script>
        // Datos del portafolio 2023 con escala 10%-90%
        const portfolioData2023 = {
            datasets: [
                {
                    label: '1-Semestre 2023',
                    data: [
                        {
                            x: 500, // NPV (k‚Ç¨)
                            y: 50,  // PE (%)
                            r: 50,  // Tama√±o basado en recursos (k‚Ç¨)
                            label: 'AI/ML for Platforms',
                            recursos: 250,
                            recursosRaw: 250,
                            pe: 50,
                            npv: 500,
                            prioridad: '1-Semestre 2023',
                            categoriaPE: 'Medio'
                        },
                        {
                            x: 250, // NPV (k‚Ç¨)
                            y: 90,  // PE (%)
                            r: 15,  // Tama√±o basado en recursos (k‚Ç¨)
                            label: 'Platform Ecosystem',
                            recursos: 75,
                            recursosRaw: 75,
                            pe: 90,
                            npv: 250,
                            prioridad: '1-Semestre 2023',
                            categoriaPE: 'Alto'
                        }
                    ],
                    backgroundColor: 'rgba(54, 162, 235, 0.7)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 2
                },
                {
                    label: '2-Semestre 2023',
                    data: [
                        {
                            x: 500, // NPV (k‚Ç¨)
                            y: 50,  // PE (%)
                            r: 50,  // Tama√±o basado en recursos (k‚Ç¨)
                            label: 'S/M Incentives',
                            recursos: 250,
                            recursosRaw: 250,
                            pe: 50,
                            npv: 500,
                            prioridad: '2-Semestre 2023',
                            categoriaPE: 'Medio'
                        }
                    ],
                    backgroundColor: 'rgba(255, 99, 132, 0.7)',
                    borderColor: 'rgba(255, 99, 132, 1)',
                    borderWidth: 2
                },
                {
                    label: '1-Semestre 2024',
                    data: [
                        {
                            x: 500, // NPV (k‚Ç¨)
                            y: 50,  // PE (%)
                            r: 15,  // Tama√±o basado en recursos (k‚Ç¨)
                            label: 'Versioning & Pricing',
                            recursos: 75,
                            recursosRaw: 75,
                            pe: 50,
                            npv: 500,
                            prioridad: '1-Semestre 2024',
                            categoriaPE: 'Medio'
                        },
                        {
                            x: 250, // NPV (k‚Ç¨)
                            y: 90,  // PE (%)
                            r: 50,  // Tama√±o basado en recursos (k‚Ç¨)
                            label: 'Trust & Defense',
                            recursos: 250,
                            recursosRaw: 250,
                            pe: 90,
                            npv: 250,
                            prioridad: '1-Semestre 2024',
                            categoriaPE: 'Alto'
                        }
                    ],
                    backgroundColor: 'rgba(75, 192, 192, 0.7)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 2
                },
                {
                    label: '2-Semestre 2024',
                    data: [
                        {
                            x: 250, // NPV (k‚Ç¨)
                            y: 50,  // PE (%)
                            r: 50,  // Tama√±o basado en recursos (k‚Ç¨)
                            label: 'Open Standards',
                            recursos: 250,
                            recursosRaw: 250,
                            pe: 50,
                            npv: 250,
                            prioridad: '2-Semestre 2024',
                            categoriaPE: 'Medio'
                        }
                    ],
                    backgroundColor: 'rgba(153, 102, 255, 0.7)',
                    borderColor: 'rgba(153, 102, 255, 1)',
                    borderWidth: 2
                }
            ]
        };

        // Configuraci√≥n del gr√°fico 2023
        const config2023 = {
            type: 'bubble',
            data: portfolioData2023,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        position: 'top',
                        labels: {
                            padding: 20,
                            usePointStyle: true,
                            pointStyle: 'circle',
                            font: {
                                size: 12
                            }
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const item = context.raw;
                                return [
                                    `Iniciativa: ${item.label}`,
                                    `NPV: ${item.npv}k‚Ç¨`,
                                    `PE: ${item.pe}% (${item.categoriaPE})`,
                                    `Recursos: ${item.recursosRaw}k‚Ç¨`,
                                    `Prioridad: ${item.prioridad}`
                                ];
                            }
                        }
                    },
                    title: {
                        display: true,
                        text: 'Portafolio 2023 - NPV vs PE vs Recursos',
                        font: {
                            size: 16,
                            weight: 'bold'
                        }
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'NPV - Retorno (k‚Ç¨)',
                            font: {
                                weight: 'bold',
                                size: 13
                            }
                        },
                        min: 200,
                        max: 550,
                        grid: {
                            color: 'rgba(0,0,0,0.1)'
                        },
                        ticks: {
                            callback: function(value) {
                                return value + 'k‚Ç¨';
                            }
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'PE - Probabilidad de √âxito (%)',
                            font: {
                                weight: 'bold',
                                size: 13
                            }
                        },
                        min: 10,
                        max: 120,
                        grid: {
                            color: 'rgba(0,0,0,0.1)'
                        },
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    }
                },
                elements: {
                    point: {
                        hoverRadius: 15,
                        hoverBorderWidth: 3
                    }
                }
            }
        };

        // Crear el gr√°fico 2023
        const ctx2023 = document.getElementById('portfolioBubbleChart2023').getContext('2d');
        new Chart(ctx2023, config2023);

        // Crear leyenda personalizada 2023
        function createLegend2023() {
            const legendContainer = document.getElementById('chartLegend2023');
            const initiatives2023 = [
                { label: 'AI/ML for Platforms', color: 'rgba(54, 162, 235, 1)', periodo: 'S1-2023', npv: '500k‚Ç¨', pe: '50%', recursos: '250k‚Ç¨', categoria: 'Medio' },
                { label: 'Platform Ecosystem', color: 'rgba(54, 162, 235, 1)', periodo: 'S1-2023', npv: '250k‚Ç¨', pe: '90%', recursos: '75k‚Ç¨', categoria: 'Alto' },
                { label: 'S/M Incentives', color: 'rgba(255, 99, 132, 1)', periodo: 'S2-2023', npv: '500k‚Ç¨', pe: '50%', recursos: '250k‚Ç¨', categoria: 'Medio' },
                { label: 'Versioning & Pricing', color: 'rgba(75, 192, 192, 1)', periodo: 'S1-2024', npv: '500k‚Ç¨', pe: '50%', recursos: '75k‚Ç¨', categoria: 'Medio' },
                { label: 'Trust & Defense', color: 'rgba(75, 192, 192, 1)', periodo: 'S1-2024', npv: '250k‚Ç¨', pe: '90%', recursos: '250k‚Ç¨', categoria: 'Alto' },
                { label: 'Open Standards', color: 'rgba(153, 102, 255, 1)', periodo: 'S2-2024', npv: '250k‚Ç¨', pe: '50%', recursos: '250k‚Ç¨', categoria: 'Medio' }
            ];

            initiatives2023.forEach(initiative => {
                const legendItem = document.createElement('div');
                legendItem.className = 'legend-item';
                const emoji = initiative.categoria === 'Alto' ? 'üü¢' : initiative.categoria === 'Medio' ? 'üü°' : 'üî¥';
                legendItem.innerHTML = `
                    <div class="legend-color" style="background-color: ${initiative.color}"></div>
                    <span>${emoji} <strong>${initiative.label}</strong> (${initiative.periodo})<br>
                    <small>NPV: ${initiative.npv} | PE: ${initiative.pe}% | Recursos: ${initiative.recursos}</small></span>
                `;
                legendContainer.appendChild(legendItem);
            });
        }

        createLegend2023();
    </script>
</body>
</html>